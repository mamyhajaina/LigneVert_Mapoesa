<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Liste Appel</h5>
        <div class="row mb-3">
          <label for="inputText" class="col-sm-2 col-form-label">Recherche</label>
          <div class="col-sm-4 d-flex">
            <input type="text" [(ngModel)]="recherche" (ngModelChange)="rechercheData()" class="form-control"
              placeholder="Numero Tel">
          </div>
          <div class="col-sm-4">
          </div>
          <div class="col-sm-2">
            <button type="button" class="btn btn-primary" (click)="exportToExcel()">
              <i class="bi bi-collection me-1"></i>Export Excel
            </button>
          </div>
        </div>
        <table class="table table-bordered border-Info text-center">
          <thead>
            <tr>
              <th scope="col">Projet</th>
              <th scope="col">Localisation</th>
              <th scope="col">Numero Tel</th>
              <th scope="col">Objet de l'appel</th>
              <th scope="col">Catégorie</th>
              <th scope="col">Statut</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let appels of appel | paginate
            : {
                itemsPerPage: tableSize,
                currentPage: page,
                totalItems: count
              };
        let i = index" class="table-{{ appels.projet.couleur }}">
              <th scope="row"><a href="">{{ appels.projet.nomProjet }}</a></th>
              <td>
                <div class="row">
                  <div class="col-lg-6">Region</div>
                  <div class="col-lg-6">{{ appels.region.nomRegion }}</div>
                </div>
                <div class="row">
                  <div class="col-lg-6">Distrique</div>
                  <div class="col-lg-6">{{ appels.distrique.nomDistrique }}</div>
                </div>
                <div class="row">
                  <div class="col-lg-6">Commune</div>
                  <div class="col-lg-6">{{ appels.distrique.commune }}</div>
                </div>
                <div class="row">
                  <div class="col-lg-6">Fokotany</div>
                  <div class="col-lg-6">{{ appels.distrique.fokotany }}</div>
                </div>
              </td>
              <td>{{appels.numeroAppelant }}</td>
              <td>{{ appels.resumeAppel }}</td>
              <td>
                <label for="">Categorie {{ appels.idCategireAppel }}</label>
              </td>
              <td>
                <label for="">Répondu</label>
              </td>
              <td>
                <div class="row mt-2">
                  <div class="col-lg-12">
                    <button type="button" class="btn btn-info btn-sm" (click)="navigateRoute(appels.idAppel)">
                      <i class="bi bi-archive"></i>Details
                    </button>
                  </div>
                </div>
                <div class="row mt-2" *ngIf="appels.reponseVu == 0">
                  <div class="col-lg-12">
                    <button (click)="envoyer(appels.idAppel)" type="button" class="btn btn-success btn-sm">
                      <i class="bi bi-envelope"></i>Envoyer
                    </button>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>


      </div>
    </div>
    <pagination-controls *ngIf="appel.length>0" previousLabel="Prev" nextLabel="Next"
      (pageChange)="onTableDataChange($event)">
    </pagination-controls>
  </div>
</div>